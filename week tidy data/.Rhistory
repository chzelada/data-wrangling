install.packages("xml")
install.packages("XML")
library(XML)
u = "https://en.wikipedia.org/wiki/List_of_countries_and_dependencies_by_population"
tables = readHTMLTable(u)
names(tables)
u = "https://en.wikipedia.org/wiki/World_population"
tables = readHTMLTable(u)
names(tables)
x = readHTMLTable('http://www.disastercenter.com/crime/iacrime.htm')
x = readHTMLTable('http://www.disastercenter.com/crime/iacrime.htm')
x = readHTMLTable('https://www.disastercenter.com/crime/iacrime.htm')
df <- read.table("http://www.stats.ox.ac.uk/pub/datasets/csb/ch11b.dat",
header = FALSE)
df
readHTMLTable("https://web.stanford.edu/~clint/bench/dw05a.htm")
a<-readHTMLTable("https://web.stanford.edu/~clint/bench/dw05a.htm")
df <- read.table("http://www.stats.ox.ac.uk/pub/datasets/csb/ch11b.dat",
header = TRUE)
df
df <- read.table("http://www.stats.ox.ac.uk/pub/datasets/csb/ch11b.dat",
header = FALSE)
a<-readHTMLTable("https://web.stanford.edu/~clint/bench/dw05a.htm")
df <- read.table("http://www.stats.ox.ac.uk/pub/datasets/csb/ch11b.dat",
header = FALSE)
df
data=read.table(file="http://www.sthda.com/upload/decathlon.txt") #Importation des donnÃ©es
print(data)
head(data)
data<-read.table(file="http://www.sthda.com/upload/decathlon.txt")
head(data)
data<-read.table(file="http://www.sthda.com/upload/decathlon.txt",header = T)
head(data)
data<-read.table(file="http://www.sthda.com/upload/decathlon.txt",header = T, row.names=1)
head(data)
data<-read.table(file="http://www.sthda.com/upload/decathlon.txt",header = T)
head(data)
data<-read.table(file="http://www.sthda.com/upload/decathlon.txt",header = T, row.names = T)
data<-read.table(file="http://www.sthda.com/upload/decathlon.txt",header = T, row.names = 2)
data<-read.table(file="http://www.sthda.com/upload/decathlon.txt",header = T, row.names = 1)
head(data)
data<-read.table(file="http://www.sthda.com/upload/decathlon.txt",header = T, row.names = 1,sep="\t")
head(data)
?read.table()
con<-url('http://www.sthda.com/upload/decathlon.rdata') # Create connexion
load(con) #Load the data
load(con) #Load the data
close(con) #close connexion
print(d) # Print the data
con
con<-url('http://www.sthda.com/upload/decathlon.rdata') # Create connexion
print(d) # Print the data
con<-url('http://www.sthda.com/upload/decathlon.rdata') # Create connexion
load(con) #Load the data
print(d) # Print the data
knitr::opts_chunk$set(echo = TRUE)
summary(cars)
plot(pressure)
require(knitr)
opts_knit$set(root.dir = "~/Documents/ds_minor/data-wrangling")
df <- read.table("http://www.stats.ox.ac.uk/pub/datasets/csb/ch11b.dat",header = FALSE)
df <- read.table("http://www.stats.ox.ac.uk/pub/datasets/csb/ch11b.dat",header = FALSE)
head(df)
version
library(reshape2)
df <- data.frame(row = LETTERS[1:3], a = 1:3, b = 4:6, c = 7:9)
df
xtable(df, "melt-raw.tex")
source("xtable.r")
xtable <- function(x, file = "", ..., rownames = FALSE){
table <- xtable::xtable(x, ...)
print(table, floating = F, hline.after = NULL,
add.to.row = list(pos = list(-1,0, nrow(x)),
command = c('\\toprule\n ','\\midrule\n  ','\\bottomrule\n')),
include.rownames = rownames, NA.string = "---",
file = file,
comment = FALSE, timestamp = FALSE
)
}
install.packages(xtable)
install.packages("xtable")
library(xtable)
xtable(df, "melt-raw.tex")
source("xtable.r")
xtable(df, "melt-raw.tex")
library(reshape2)
df <- data.frame(row = LETTERS[1:3], a = 1:3, b = 4:6, c = 7:9)
dfm <- melt(df, id = "row")
dfm
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidyr)
?gather
df
dfg <-gather(df, key="row")
dfg
dfg <-gather(df, key="row")
dfm <- melt(df, id = "row")
dfg <-gather(df, key="row")
dfm
dfg
dfg <-gather(df, factor_key ="row" )
dfg
df <- data.frame(row = LETTERS[1:3], a = 1:3, b = 4:6, c = 7:9)
df
dfg <-gather(df, -row )
dfg
dfg <-gather(df )
dfg
df
dfg <-gather(df,id, a:c)
dfg
dfg <-gather(df,id, value=a:c)
dfg
dfm
dfg <-gather(df,variable, value, a:c)
dfg
dfg <-gather(df,key=variable, value, a:c)
dfg
dfg <-gather(df,key=variable, value=value, a:c)
dfg
dfg <-gather(df,key=letra, value=valor, a:c)
dfg
dfg <-gather(df,key=letra, value=valor, a:b)
dfg
dfg <-gather(df,key="variable", value="value", a:c)
dfg
library(tidyverse)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
knitr::opts_chunk$set(echo = TRUE)
library(reshape2)
RENDER()
render()
# Load -----------------------------------------------------------------------
raw <- read.csv("tb.csv", na.strings = "")
setwd("~/R codigos/tidy-data/data")
# Load -----------------------------------------------------------------------
raw <- read.csv("tb.csv", na.strings = "")
head(raw)
raw <- read.csv("tb.csv", na.strings = "")
raw$new_sp <- NULL
raw <- subset(raw, year == 2000)
names(raw)[1] <- "country"
names(raw) <- str_replace(names(raw), "new_sp_", "")
raw$m04 <- NULL
raw$m514 <- NULL
raw$f04 <- NULL
raw$f514 <- NULL
head(raw)
raw
library(xlsx)
install.packages("rjava")
install.packages("rJava")
library(xlsx)
library(readxl)
setwd("~/GitHub/data-wrangling/week 9")
setwd("~/GitHub/data-wrangling/week tidy data")
write.csv(file=raw, "raw.csv")
write.csv(raw, "raw.csv")
setwd("~/GitHub/data-wrangling/week tidy data")
raw<-read.csv("raw.csv")
head(raw)
clean <- melt(raw, id = c("country", "year"), na.rm = TRUE)
head(clean)
names(clean)[3] <- "column"
names(clean)[4] <- "cases"
head(clean)
clean <- arrange(clean, country, column, year)
head(clean)
colnames(raw)
clean_g<- gather(raw, key=c("country","year"))
clean_g
head(clean_g)
dfg <-gather(df,key=country,year, value="value", a:c)
clean_g<- gather(raw, key=c("country","year"))
clean_g<- gather(raw, column, cases, -country,-year)
head(clean)
head(clean_g)
clean <- melt(raw, id = c("country", "year"), na.rm = TRUE)
head(clean)
clean
clean$sex <- str_sub(clean$column, 1, 1)
lean <- melt(raw, id = c("country", "year"), na.rm = TRUE)
arrange()
clean
?str_sub
clean$sex
clean <- melt(raw, id = c("country", "year"), na.rm = TRUE)
raw<-read.csv("raw.csv")
head(raw)
clean <- melt(raw, id = c("country", "year"), na.rm = TRUE)
names(clean)[3] <- "column"
names(clean)[4] <- "cases"
clean <- arrange(clean, country, column, year)
head(clean)
clean_g<- gather(raw, column, cases, -country,-year, na.rm = TRUE)
clean$sex <- str_sub(clean$column, 1, 1)
clean$sex
library(foreign)
pew <- read.spss("pew.sav")
setwd("~/GitHub/data-wrangling/week tidy data")
pew <- read.spss("pew.sav")
setwd("~/R codigos/tidy-data/data")
pew <- read.spss("pew.sav")
pew
str(pew)
pew <- as.data.frame(pew)
str(pew)
religion <- pew[c("q16", "reltrad", "income")]
head(religion)
religion <- pew[c("q16", "reltrad", "income")]
religion$reltrad <- as.character(religion$reltrad)
religion$reltrad <- str_replace(religion$reltrad, " Churches", "")
religion$reltrad <- str_replace(religion$reltrad, " Protestant", " Prot")
religion$reltrad[religion$q16 == " Atheist (do not believe in God) "] <- "Atheist"
religion$reltrad[religion$q16 == " Agnostic (not sure if there is a God) "] <- "Agnostic"
religion$reltrad <- str_trim(religion$reltrad)
religion$reltrad <- str_replace_all(religion$reltrad, " \\(.*?\\)", "")
religion$income <- c("Less than $10,000" = "<$10k",
"10 to under $20,000" = "$10-20k",
"20 to under $30,000" = "$20-30k",
"30 to under $40,000" = "$30-40k",
"40 to under $50,000" = "$40-50k",
"50 to under $75,000" = "$50-75k",
"75 to under $100,000" = "$75-100k",
"100 to under $150,000" = "$100-150k",
"$150,000 or more" = ">150k",
"Don't know/Refused (VOL)" = "Don't know/refused")[religion$income]
religion$income <- factor(religion$income, levels = c("<$10k", "$10-20k", "$20-30k", "$30-40k", "$40-50k", "$50-75k",
"$75-100k", "$100-150k", ">150k", "Don't know/refused"))
counts <- count(religion, c("reltrad", "income"))
names(counts)[1] <- "religion"
xtable(counts[1:10, ], file = "pew-clean.tex")
library(stringr)
library(foreign)
library(stringr)
library(plyr)
library(reshape2)
source("xtable.r")
# Data from http://pewforum.org/Datasets/Dataset-Download.aspx
# Load data -----------------------------------------------------------------
pew <- read.spss("pew.sav")
pew <- as.data.frame(pew)
religion <- pew[c("q16", "reltrad", "income")]
religion$reltrad <- as.character(religion$reltrad)
religion$reltrad <- str_replace(religion$reltrad, " Churches", "")
religion$reltrad <- str_replace(religion$reltrad, " Protestant", " Prot")
religion$reltrad[religion$q16 == " Atheist (do not believe in God) "] <- "Atheist"
religion$reltrad[religion$q16 == " Agnostic (not sure if there is a God) "] <- "Agnostic"
religion$reltrad <- str_trim(religion$reltrad)
religion$reltrad <- str_replace_all(religion$reltrad, " \\(.*?\\)", "")
religion$income <- c("Less than $10,000" = "<$10k",
"10 to under $20,000" = "$10-20k",
"20 to under $30,000" = "$20-30k",
"30 to under $40,000" = "$30-40k",
"40 to under $50,000" = "$40-50k",
"50 to under $75,000" = "$50-75k",
"75 to under $100,000" = "$75-100k",
"100 to under $150,000" = "$100-150k",
"$150,000 or more" = ">150k",
"Don't know/Refused (VOL)" = "Don't know/refused")[religion$income]
religion$income <- factor(religion$income, levels = c("<$10k", "$10-20k", "$20-30k", "$30-40k", "$40-50k", "$50-75k",
"$75-100k", "$100-150k", ">150k", "Don't know/refused"))
counts <- count(religion, c("reltrad", "income"))
names(counts)[1] <- "religion"
xtable(counts[1:10, ], file = "pew-clean.tex")
# Convert into the form in which I originally saw it -------------------------
raw <- dcast(counts, religion ~ income)
xtable(raw[1:10, 1:7], file = "pew-raw.tex")
raw
counts
?dcast
raw
write.csv(raw,file="religion.csv")
religion
head(religion)
head(counts)
head(religion)
religion <- pew[c("q16", "reltrad", "income")]
head(religion)
religion$reltrad <- as.character(religion$reltrad)
religion$reltrad <- str_replace(religion$reltrad, " Churches", "")
head(religion)
religion$reltrad <- str_replace(religion$reltrad, " Protestant", " Prot")
head(religion)
religion$reltrad[religion$q16 == " Atheist (do not believe in God) "] <- "Atheist"
religion$reltrad[religion$q16 == " Agnostic (not sure if there is a God) "] <- "Agnostic"
head(religion)
tail(religion)
religion
religion$reltrad
religion$reltrad <- str_replace_all(religion$reltrad, " \\(.*?\\)", "")
religion$reltrad
religion
raw
religion$q16
counts
head(religion)
counts
raw
religion
raw
counts
head(counts, n=10)
religion
religion$income <- c("Less than $10,000" = "<$10k",
"10 to under $20,000" = "$10-20k",
"20 to under $30,000" = "$20-30k",
"30 to under $40,000" = "$30-40k",
"40 to under $50,000" = "$40-50k",
"50 to under $75,000" = "$50-75k",
"75 to under $100,000" = "$75-100k",
"100 to under $150,000" = "$100-150k",
"$150,000 or more" = ">150k",
"Don't know/Refused (VOL)" = "Don't know/refused")[religion$income]
religion
religion$income <- factor(religion$income, levels = c("<$10k", "$10-20k", "$20-30k", "$30-40k", "$40-50k", "$50-75k",
"$75-100k", "$100-150k", ">150k", "Don't know/refused"))
levels(religion$income)
religion <- pew[c("q16", "reltrad", "income")]
religion$reltrad <- as.character(religion$reltrad)
religion$reltrad <- str_replace(religion$reltrad, " Churches", "")
religion$reltrad <- str_replace(religion$reltrad, " Protestant", " Prot")
religion$reltrad[religion$q16 == " Atheist (do not believe in God) "] <- "Atheist"
religion$reltrad[religion$q16 == " Agnostic (not sure if there is a God) "] <- "Agnostic"
religion$reltrad <- str_trim(religion$reltrad)
religion$reltrad <- str_replace_all(religion$reltrad, " \\(.*?\\)", "")
religion$income <- c("Less than $10,000" = "<$10k",
"10 to under $20,000" = "$10-20k",
"20 to under $30,000" = "$20-30k",
"30 to under $40,000" = "$30-40k",
"40 to under $50,000" = "$40-50k",
"50 to under $75,000" = "$50-75k",
"75 to under $100,000" = "$75-100k",
"100 to under $150,000" = "$100-150k",
"$150,000 or more" = ">150k",
"Don't know/Refused (VOL)" = "Don't know/refused")[religion$income]
religion$income <- as.factor(religion$income)
levels(religion$income)
religion <- pew[c("q16", "reltrad", "income")]
getwd()
religion
setwd("~/GitHub/data-wrangling/week tidy data")
write.csv(religion, file="dirty-religion.csv")
religion<-read.csv("religion.csv")
religion
setwd("~/R codigos/tidy-data/data")
pew <- read.spss("pew.sav")
pew <- as.data.frame(pew)
religion <- pew[c("q16", "reltrad", "income")]
religion$reltrad <- as.character(religion$reltrad)
religion$reltrad <- str_replace(religion$reltrad, " Churches", "")
religion$reltrad <- str_replace(religion$reltrad, " Protestant", " Prot")
religion$reltrad[religion$q16 == " Atheist (do not believe in God) "] <- "Atheist"
religion$reltrad[religion$q16 == " Agnostic (not sure if there is a God) "] <- "Agnostic"
religion$reltrad <- str_trim(religion$reltrad)
religion$reltrad <- str_replace_all(religion$reltrad, " \\(.*?\\)", "")
religion$income <- c("Less than $10,000" = "<$10k",
"10 to under $20,000" = "$10-20k",
"20 to under $30,000" = "$20-30k",
"30 to under $40,000" = "$30-40k",
"40 to under $50,000" = "$40-50k",
"50 to under $75,000" = "$50-75k",
"75 to under $100,000" = "$75-100k",
"100 to under $150,000" = "$100-150k",
"$150,000 or more" = ">150k",
"Don't know/Refused (VOL)" = "Don't know/refused")[religion$income]
religion$income <- as.factor(religion$income)
levels(religion$income)
religion$income <- factor(religion$income, levels = c("<$10k", "$10-20k", "$20-30k", "$30-40k", "$40-50k", "$50-75k",
"$75-100k", "$100-150k", ">150k", "Don't know/refused"))
counts <- count(religion, c("reltrad", "income"))
names(counts)[1] <- "religion"
xtable(counts[1:10, ], file = "pew-clean.tex")
# Convert into the form in which I originally saw it -------------------------
raw <- dcast(counts, religion ~ income)
raw
save(religion, file="religion.Rda")
setwd("~/GitHub/data-wrangling/week tidy data")
save(religion, file="religion.Rda")
remove(religion)
religion<-open("religion.Rda")
religion<-load("religion.Rda")
religion<-load("religion.Rda")
religion
load("C:/Users/jctep/OneDrive/Documents/GitHub/data-wrangling/week tidy data/religion.Rda")
religion
remove(religion)
religion<-load("religion.Rda")
setwd("~/GitHub/data-wrangling/week tidy data")
religion<-load("religion.Rda")
religion
load("religion.Rda")
counts
raw
remove(religion)
load("dirty_religion.Rda")
save(counts,"counts_religion.Rda")
save(counts,file="counts_religion.Rda")
remove(counts)
load("counts_religion.Rda")
library(reshape2)
library(tidyverse)
counts
head(counts)
counts_tidy <- counts
remove(counts)
save(counts_tidy,file = "religion_tidy.Rda")
wide_religion <-raw
remove(raw)
save(wide_religion,file = "wide_religion.Rda")
remove(wide_religion)
load("wide_religion.Rda")
head(wide_religion)
####melting counts
clean <- melt(wide_religion, id = c("religion"), na.rm = TRUE)
####melting counts
tidy_religion <- melt(wide_religion, id = c("religion"), na.rm = TRUE)
load("dirty_religion.Rda")
###dirty religion
head(religion)
pew <- read.spss("pew.sav")
setwd("~/R codigos/tidy-data/data")
setwd("~/GitHub/data-wrangling/week tidy data")
setwd("~/R codigos/tidy-data/data")
religion <- pew[c("q16", "reltrad", "income")]
religion$reltrad <- as.character(religion$reltrad)
religion$reltrad <- str_replace(religion$reltrad, " Churches", "")
religion$reltrad <- str_replace(religion$reltrad, " Protestant", " Prot")
religion$reltrad[religion$q16 == " Atheist (do not believe in God) "] <- "Atheist"
religion$reltrad[religion$q16 == " Agnostic (not sure if there is a God) "] <- "Agnostic"
religion$reltrad <- str_trim(religion$reltrad)
religion$reltrad <- str_replace_all(religion$reltrad, " \\(.*?\\)", "")
head(religion)
setwd("~/GitHub/data-wrangling/week tidy data")
save(religion, "dirty_religion.Rda")
save(religion, "dirty_religion.Rda")
save(religion, file =  "dirty_religion.Rda")
remove(religion)
load("dirty_religion.Rda")
head(religion)
religion$income <- c("Less than $10,000" = "<$10k",
"10 to under $20,000" = "$10-20k",
"20 to under $30,000" = "$20-30k",
"30 to under $40,000" = "$30-40k",
"40 to under $50,000" = "$40-50k",
"50 to under $75,000" = "$50-75k",
"75 to under $100,000" = "$75-100k",
"100 to under $150,000" = "$100-150k",
"$150,000 or more" = ">150k",
"Don't know/Refused (VOL)" = "Don't know/refused")[religion$income]
religion$income <- c("Less than $10,000" = "<$10k",
"10 to under $20,000" = "$10-20k",
"20 to under $30,000" = "$20-30k",
"30 to under $40,000" = "$30-40k",
"40 to under $50,000" = "$40-50k",
"50 to under $75,000" = "$50-75k",
"75 to under $100,000" = "$75-100k",
"100 to under $150,000" = "$100-150k",
"$150,000 or more" = ">150k",
"Don't know/Refused (VOL)" = "Don't know/refused")[religion$income]
###making religion income a factor
religion$income <- as.factor(religion$income)
###dirty religion
head(religion)
load("dirty_religion.Rda")
###dirty religion
head(religion)
religion$income <- c("Less than $10,000" = "<$10k",
"10 to under $20,000" = "$10-20k",
"20 to under $30,000" = "$20-30k",
"30 to under $40,000" = "$30-40k",
"40 to under $50,000" = "$40-50k",
"50 to under $75,000" = "$50-75k",
"75 to under $100,000" = "$75-100k",
"100 to under $150,000" = "$100-150k",
"$150,000 or more" = ">150k",
"Don't know/Refused (VOL)" = "Don't know/refused")[religion$income]
###dirty religion
head(religion)
###making religion income a factor
religion$income <- as.factor(religion$income)
###dirty religion
head(religion)
?count_()
count()
?count()
counts<-count(religion, c("reltrad","income"))
head(counts)
names(counts)[1] <- "religion"
head(counts)
tidy_religion
head(tidy_religion)
tidy_religion_gather <-gather(wide_religion, religion)
tidy_religion_gather
tidy_religion_gather <-gather(wide_religion, -religion)
tidy_religion_gather
?gather
head(wide_religion)
tidy_religion %>%head()
tidy_religion_gather <-gather(wide_religion, key="variable",-religion)
tidy_religion_gather <-gather(wide_religion, key="variable",value="value",-religion)
tidy_religion_gather
wide_religion
head(tidy_religion)
names(tidy_religion)[2] <-"income"
names(tidy_religion)[3] <-"counts"
head(tidy_religion)
##gathering wide_religion
tidy_religion_gather <-gather(wide_religion, key="income",value="counts",-religion)
head(tidy_religion_gather)
